(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{ModuleModal:()=>j,ServiceModal:()=>v,SettingsPage:()=>w});const n=flarum.core.compat["admin/app"];var r=e.n(n);function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}const i=flarum.core.compat["admin/components/ExtensionPage"];var o=e.n(i);const l=flarum.core.compat["common/components/Button"];var d=e.n(l);const c=flarum.core.compat["common/utils/ItemList"];var u=e.n(c);const y=flarum.core.compat["admin/components/SettingsModal"];var h=e.n(y);const f=flarum.core.compat["common/components/Switch"];var p=e.n(f),v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).key="",t.docUrl=null,t}s(t,e);var n=t.prototype;return n.className=function(){return"Modal--large"},n.title=function(){return r().translator.trans("ordinaryjellyfish-sentra.admin.services."+this.key)},n.helpText=function(){return r().translator.trans("ordinaryjellyfish-sentra.admin.services."+this.key+"_help")},n.content=function(){var e="ordinaryjellyfish-sentra.services."+this.key+".enabled",t=this.setting(e)();return m("div",{className:"Modal-body"},m("p",{className:"helpText"},this.helpText()),this.docUrl&&m("a",{className:"Button Button--primary",style:"margin-bottom:10px",icon:"fas fa-book",href:this.docUrl,external:!0,target:"_blank"},r().translator.trans("ordinaryjellyfish-sentra.admin.view_documentation")),m("div",{className:"Form"},m("div",{className:"Form-group"},m(p(),{state:!!t&&"0"!==t,onchange:this.settings[e]},r().translator.trans("ordinaryjellyfish-sentra.admin.enable"))),m("div",{className:"Form-group"},this.form()),m("div",{className:"Form-group"},this.submitButton())))},n.apiKeyField=function(){return m("[",null,m("label",{for:this.key+"_apiKey"},r().translator.trans("ordinaryjellyfish-sentra.admin.api_key")),m("input",{type:"text",className:"FormControl",spellcheck:"false",id:this.key+"_apiKey",bidi:this.setting("ordinaryjellyfish-sentra.services."+this.key+".api_key")}))},n.endpointField=function(){return m("[",null,m("label",{for:this.key+"_endpoint"},r().translator.trans("ordinaryjellyfish-sentra.admin.endpoint")),m("input",{type:"text",className:"FormControl",spellcheck:"false",id:this.key+"_endpoint",bidi:this.setting("ordinaryjellyfish-sentra.services."+this.key+".endpoint")}))},n.onsaved=function(){window.location.reload()},t}(h());v.isDismissible=!0;var g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).key="content_safety",t}return s(t,e),t.prototype.form=function(){var e="ordinaryjellyfish-sentra.services."+this.key+".analyze_images",t=this.setting(e)();return[m(p(),{state:!!t&&"0"!==t,onchange:this.settings[e]},r().translator.trans("ordinaryjellyfish-sentra.admin.services.content_safety_settings.analyze_images")),this.apiKeyField(),this.endpointField()]},t}(v);const b=flarum.core.compat["common/components/Alert"];var _=e.n(b),j=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).key="",t.docUrl=null,t}s(t,e);var n=t.prototype;return n.className=function(){return"Modal--large"},n.title=function(){return r().translator.trans("ordinaryjellyfish-sentra.admin.modules."+this.key)},n.helpText=function(){return r().translator.trans("ordinaryjellyfish-sentra.admin.modules."+this.key+"_help")},n.dependencies=function(){return[]},n.areRequiredServicesEnabled=function(){var e=this;return this.dependencies().every((function(t){return"1"===e.setting("ordinaryjellyfish-sentra.services."+t+".enabled")()}))},n.content=function(){var e="ordinaryjellyfish-sentra.modules."+this.key+".enabled",t=this.setting(e)(),n=this.dependencies(),a=this.areRequiredServicesEnabled();return m("div",{className:"Modal-body"},m("p",{className:"helpText"},this.helpText()),this.docUrl&&m("a",{className:"Button Button--primary",style:"margin-bottom:10px",icon:"fas fa-book",href:this.docUrl,external:!0,target:"_blank"},r().translator.trans("ordinaryjellyfish-sentra.admin.view_documentation")),n.length>0&&m("p",null,r().translator.trans("ordinaryjellyfish-sentra.admin.modules.requires",{services:n.map((function(e){return r().translator.trans("ordinaryjellyfish-sentra.admin.services."+e)})).join(", ")})),a?m("div",{className:"Form"},m("div",{className:"Form-group"},m(p(),{state:!!t&&"0"!==t,onchange:this.settings[e],disabled:!a},r().translator.trans("ordinaryjellyfish-sentra.admin.enable"))),m("div",{className:"Form-group"},this.form()),m("div",{className:"Form-group"},this.submitButton())):m(_(),{dismissable:!1,type:"error"},r().translator.trans("ordinaryjellyfish-sentra.admin.modules.requires_error")))},n.onsaved=function(){window.location.reload()},t}(h());j.isDismissible=!0;const k=flarum.core.compat["common/components/Select"];var N=e.n(k),x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).key="post_shield",t}s(t,e);var n=t.prototype;return n.dependencies=function(){return["content_safety"]},n.form=function(){return[m("h3",null,r().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.harm_categories")),this.harmCategories()]},n.harmCategories=function(){var e=this;return["Hate","Sexual","Violence","SelfHarm"].map((function(t){var n="ordinaryjellyfish-sentra.modules."+e.key+".categories."+t+".severity";return m("div",{className:"Form-group"},m("label",{className:"checkbox"},m("input",{type:"checkbox",bidi:e.setting("ordinaryjellyfish-sentra.modules."+e.key+".categories."+t+".enabled")}),r().translator.trans("ordinaryjellyfish-sentra.lib.post_shield."+t)),m("div",{className:"helpText"},r().translator.trans("ordinaryjellyfish-sentra.lib.post_shield."+t+"_help")),m("label",null,r().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.severity_level")),m(N(),{options:{2:r().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.severity_level_low"),4:r().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.severity_level_medium"),6:r().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.severity_level_high")},onchange:e.settings[n],value:e.setting(n)()}))}))},t}(j),w=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var n=t.prototype;return n.content=function(){return m("div",{className:"ExtensionPage-settings"},m("div",{className:"container"},m("h2",null,r().translator.trans("ordinaryjellyfish-sentra.admin.services.heading")),this.serviceItems().toArray().map((function(e){var t=e.label,n=e.modal;return m(d(),{className:"Button sentra-button",onclick:function(){return r().modal.show(n)}},t)})),m("h2",null,r().translator.trans("ordinaryjellyfish-sentra.admin.modules.heading")),this.moduleItems().toArray().map((function(e){var t=e.label,n=e.modal;return m(d(),{className:"Button sentra-button",onclick:function(){return r().modal.show(n)}},t)}))))},n.serviceItems=function(){var e=new(u());return e.add("content_safety",{label:r().translator.trans("ordinaryjellyfish-sentra.admin.services.content_safety"),modal:g}),e},n.moduleItems=function(){var e=new(u());return e.add("post_shield",{label:r().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield"),modal:x}),e},t}(o());r().initializers.add("ordinaryjellyfish/sentra",(function(){r().extensionData.for("ordinaryjellyfish-sentra").registerPage(w).registerPermission({icon:"fas fa-door-open",label:r().translator.trans("ordinaryjellyfish-sentra.admin.permissions.bypass"),permission:"ordinaryjellyfish-sentra.bypass"},"moderate")}))})(),module.exports=t})();
//# sourceMappingURL=admin.js.map