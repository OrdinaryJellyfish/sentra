(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{"use strict";const t=flarum.core.compat["admin/app"];var n=e.n(t);function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}const a=flarum.core.compat["admin/components/ExtensionPage"];var i=e.n(a);const o=flarum.core.compat["common/components/Button"];var l=e.n(o);const c=flarum.core.compat["common/utils/ItemList"];var d=e.n(c);const u=flarum.core.compat["admin/components/SettingsModal"];var y=e.n(u);const h=flarum.core.compat["common/components/Switch"];var p=e.n(h),f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).key="",t}s(t,e);var r=t.prototype;return r.className=function(){return"Modal--large"},r.title=function(){return n().translator.trans("ordinaryjellyfish-sentra.admin.services."+this.key)},r.helpText=function(){return n().translator.trans("ordinaryjellyfish-sentra.admin.services."+this.key+"_help")},r.content=function(){var e="ordinaryjellyfish-sentra.services."+this.key+".enabled",t=this.setting(e)();return m("div",{className:"Modal-body"},m("p",{className:"helpText"},this.helpText()),m("div",{className:"Form"},m("div",{className:"Form-group"},m(p(),{state:!!t&&"0"!==t,onchange:this.settings[e]},n().translator.trans("ordinaryjellyfish-sentra.admin.enable"))),m("div",{className:"Form-group"},this.form()),m("div",{className:"Form-group"},this.submitButton())))},r.apiKeyField=function(){return m("div",null,m("label",{className:"sentra-form-label",for:this.key+"_apiKey"},n().translator.trans("ordinaryjellyfish-sentra.admin.api_key")),m("input",{type:"text",className:"FormControl",spellcheck:"false",id:this.key+"_apiKey",bidi:this.setting("ordinaryjellyfish-sentra.services."+this.key+".api_key")}))},r.endpointField=function(){return m("div",null,m("label",{className:"sentra-form-label",for:this.key+"_endpoint"},n().translator.trans("ordinaryjellyfish-sentra.admin.endpoint")),m("input",{type:"text",className:"FormControl",spellcheck:"false",id:this.key+"_endpoint",bidi:this.setting("ordinaryjellyfish-sentra.services."+this.key+".endpoint")}))},r.onsaved=function(){window.location.reload()},t}(y());f.isDismissible=!0;var v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).key="content_safety",t}return s(t,e),t.prototype.form=function(){var e="ordinaryjellyfish-sentra.services."+this.key+".analyze_images",t=this.setting(e)();return[m(p(),{state:!!t&&"0"!==t,onchange:this.settings[e]},n().translator.trans("ordinaryjellyfish-sentra.admin.services.content_safety_settings.analyze_images")),this.apiKeyField(),this.endpointField()]},t}(f);const g=flarum.core.compat["common/components/Alert"];var _=e.n(g),b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).key="",t}s(t,e);var r=t.prototype;return r.className=function(){return"Modal--large"},r.title=function(){return n().translator.trans("ordinaryjellyfish-sentra.admin.modules."+this.key)},r.helpText=function(){return n().translator.trans("ordinaryjellyfish-sentra.admin.modules."+this.key+"_help")},r.dependencies=function(){return[]},r.areRequiredServicesEnabled=function(){var e=this;return this.dependencies().every((function(t){return"1"===e.setting("ordinaryjellyfish-sentra.services."+t+".enabled")()}))},r.content=function(){var e="ordinaryjellyfish-sentra.modules."+this.key+".enabled",t=this.setting(e)(),r=this.dependencies(),s=this.areRequiredServicesEnabled();return m("div",{className:"Modal-body"},m("p",{className:"helpText"},this.helpText()),r.length>0&&m("p",null,n().translator.trans("ordinaryjellyfish-sentra.admin.modules.requires",{services:r.map((function(e){return n().translator.trans("ordinaryjellyfish-sentra.admin.services."+e)})).join(", ")})),s?m("div",{className:"Form"},m("div",{className:"Form-group"},m(p(),{state:!!t&&"0"!==t,onchange:this.settings[e],disabled:!s},n().translator.trans("ordinaryjellyfish-sentra.admin.enable"))),m("div",{className:"Form-group"},this.form()),m("div",{className:"Form-group"},this.submitButton())):m(_(),{dismissable:!1,type:"error"},n().translator.trans("ordinaryjellyfish-sentra.admin.modules.requires_error")))},r.onsaved=function(){window.location.reload()},t}(y());b.isDismissible=!0;const j=flarum.core.compat["common/components/Select"];var k=e.n(j),N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).key="post_shield",t}s(t,e);var r=t.prototype;return r.dependencies=function(){return["content_safety"]},r.form=function(){return[m("h3",null,n().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.harm_categories")),this.harmCategories()]},r.harmCategories=function(){var e=this;return["Hate","Sexual","Violence","SelfHarm"].map((function(t){var r="ordinaryjellyfish-sentra.modules."+e.key+".categories."+t+".severity";return m("div",{className:"Form-group"},m("label",{className:"checkbox"},m("input",{type:"checkbox",bidi:e.setting("ordinaryjellyfish-sentra.modules."+e.key+".categories."+t+".enabled")}),n().translator.trans("ordinaryjellyfish-sentra.lib.post_shield."+t)),m("div",{className:"helpText"},n().translator.trans("ordinaryjellyfish-sentra.lib.post_shield."+t+"_help")),m("label",null,n().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.severity_level")),m(k(),{options:{2:n().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.severity_level_low"),4:n().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.severity_level_medium"),6:n().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield_settings.severity_level_high")},onchange:e.settings[r],value:e.setting(r)()}))}))},t}(b),x=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var r=t.prototype;return r.content=function(){return m("div",{className:"ExtensionPage-settings"},m("div",{className:"container"},m("h2",null,n().translator.trans("ordinaryjellyfish-sentra.admin.services.heading")),this.serviceItems().toArray().map((function(e){var t=e.label,r=e.modal;return m(l(),{className:"Button",onclick:function(){return n().modal.show(r)}},t)})),m("h2",null,n().translator.trans("ordinaryjellyfish-sentra.admin.modules.heading")),this.moduleItems().toArray().map((function(e){var t=e.label,r=e.modal;return m(l(),{className:"Button",onclick:function(){return n().modal.show(r)}},t)}))))},r.serviceItems=function(){var e=new(d());return e.add("content_safety",{label:n().translator.trans("ordinaryjellyfish-sentra.admin.services.content_safety"),modal:v}),e},r.moduleItems=function(){var e=new(d());return e.add("post_shield",{label:n().translator.trans("ordinaryjellyfish-sentra.admin.modules.post_shield"),modal:N}),e},t}(i());n().initializers.add("ordinaryjellyfish/sentra",(function(){n().extensionData.for("ordinaryjellyfish-sentra").registerPage(x).registerPermission({icon:"fas fa-door-open",label:n().translator.trans("ordinaryjellyfish-sentra.admin.permissions.bypass"),permission:"ordinaryjellyfish-sentra.bypass"},"moderate")}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map